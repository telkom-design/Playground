/** @jsx jsx */

import React from 'react';
import { jsx, useThemeUI } from '@theme-ui/core';
import { get } from '@theme-ui/css';
import { Textarea as Component, TextareaProps as Props, ForwardRef } from '@theme-ui/components';

export interface TextareaProps extends Props {
  label?: '' | String;
  variant?: 'normal' | 'success' | 'error';
}

export const Textarea: ForwardRef<HTMLTextAreaElement, TextareaProps> = React.forwardRef(
  ({ label = '', variant = 'normal', ...rest }, ref) => {
    const context = useThemeUI();
    const labels = get(context.theme, `forms.textarea.labelTextArea`);
    const variants = get(context.theme, `forms.textarea.${variant}`);
    return (
      <React.Fragment>
        <div sx={{ ...labels }}>{label}</div>
        <Component
          {...rest}
          ref={ref}
          sx={{ ...variants }}
        />
      </React.Fragment>
    );
  }
)

export default Textarea;